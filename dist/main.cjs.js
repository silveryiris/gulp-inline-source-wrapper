"use strict";function _interopDefault(r){return r&&"object"==typeof r&&"default"in r?r.default:r}Object.defineProperty(exports,"__esModule",{value:!0});var inlineSource=require("inline-source"),path=_interopDefault(require("path")),through=_interopDefault(require("through2")),PluginError=_interopDefault(require("plugin-error"));const PROJECT_NAME="gulp-inline-source-wrapper";function inlineSourceWrapper(r={}){const e=through.obj(async(t,n,i)=>{if(t.isNull()||t.isDirectory())return e.push(t),i();if(t.isStream())return e.emit("error",new PluginError(PROJECT_NAME,"Streaming not supported")),i();const o={...{rootpath:path.dirname(t.path),htmlpath:t.path},...r};try{const r=await inlineSource.inlineSource(t.contents.toString(),o);t.contents=new Buffer(r||""),e.push(t),i()}catch(r){e.emit("error",new PluginError(PROJECT_NAME,r))}});return e}exports.default=inlineSourceWrapper,exports.inlineSourceWrapper=inlineSourceWrapper;
